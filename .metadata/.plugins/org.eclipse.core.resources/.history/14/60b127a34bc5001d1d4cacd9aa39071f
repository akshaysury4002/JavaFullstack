 package com.as.user;

import com.as.exception.UserNotFoundException;

public class UsersDb {
	
	 public static final int NO_MORE_SPACE = 890;
	 public static final int USER_ALREADY_EXISTS = 990;
	 public static final int USER_SUCCESSFULLY_CREATED= 1001;
	    
	    
	    
	    // our users that we will create from users menu,
	    // those users will be stored here
	    private static final User[] users = new User[5];    
	    
	    
	    public static int addNewUser(int id, String name) {

	        int emptyPos = getEmptyPosition();
	       
	        if(emptyPos == -1) {
	            return NO_MORE_SPACE;
	        }

	        // check user availability
	        int pos = isExists(id);
	    
	        if(pos != -1)return USER_ALREADY_EXISTS;
	      
	        // we have reached this line means, there is space and user is fresh
	        // supplied userid is fresh  
	        
	        User user = new User(id, name);
	        users[emptyPos] = user;
	        return USER_SUCCESSFULLY_CREATED;
	    }
	    
	    
	    public static User[] listUsers() {
	        return users;
	    }

	    
	    private static int isExists(int id) {
	        for ( int i = 0; i < users.length; i++  ) {
	            User user = users[i];
	            if(user != null) {
	                if(user.getId()==id)return i;
	                
	            }
	        }
	        return -1;
	    }
	    
	    private static int getEmptyPosition() {
	        for ( int i = 0; i < users.length; i++  ) {
	            User user = users[i];
	            if(user == null) {
	                return i; // at the ith location, block is empty
	            }
	        }
	        return -1;
	    }
	    
	    public static int checkUser(int id)
	    {
	    	 for ( int i = 0; i < users.length; i++  ) {
		            User user = users[i];
		            if(user != null) {
		                if(user.getId()==id) {
		                	System.out.println("\n ðŸ‘‰ Id " + user.getId() + " Name " + user.getName()+"\n");
		                	return 1;
		                }
		                
		            }
		        }
	    	 return -1;
	    	
	    }
	   
	    public static User findUserById(int userId) {
	    	for ( int i = 0; i < users.length; i++  ) {
	            User user = users[i];
	            if(user != null) {
	                if(user.getId()==userId)return user;
	                
	            }
	        throw new UserNotFoundException("âŒ User Id " + userId +" Not Found");
	    }
	    
}
